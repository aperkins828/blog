<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough | To the cloud</title><meta name=keywords content><meta name=description content="What I&rsquo;m doing I&rsquo;ve been studying for the AWS Advanced Networking Specialty exam off and on for a few months now. As I ramp up to actually take the test, I&rsquo;ve decided to blog my journey of going through the official AWS book exercises at the end of each chapter. The plan is to make a quick little blog post as I walk through each as a way to learn in public and get myself into practicing writing more."><meta name=author content><link rel=canonical href=https://aperkins828.github.io/blog/posts/chapter2-walkthrough/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://aperkins828.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aperkins828.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://aperkins828.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://aperkins828.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://aperkins828.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough"><meta property="og:description" content="What I&rsquo;m doing I&rsquo;ve been studying for the AWS Advanced Networking Specialty exam off and on for a few months now. As I ramp up to actually take the test, I&rsquo;ve decided to blog my journey of going through the official AWS book exercises at the end of each chapter. The plan is to make a quick little blog post as I walk through each as a way to learn in public and get myself into practicing writing more."><meta property="og:type" content="article"><meta property="og:url" content="https://aperkins828.github.io/blog/posts/chapter2-walkthrough/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-29T14:35:26-04:00"><meta property="article:modified_time" content="2022-10-29T14:35:26-04:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough"><meta name=twitter:description content="What I&rsquo;m doing I&rsquo;ve been studying for the AWS Advanced Networking Specialty exam off and on for a few months now. As I ramp up to actually take the test, I&rsquo;ve decided to blog my journey of going through the official AWS book exercises at the end of each chapter. The plan is to make a quick little blog post as I walk through each as a way to learn in public and get myself into practicing writing more."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aperkins828.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough","item":"https://aperkins828.github.io/blog/posts/chapter2-walkthrough/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough","name":"AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough","description":"What I\u0026rsquo;m doing I\u0026rsquo;ve been studying for the AWS Advanced Networking Specialty exam off and on for a few months now. As I ramp up to actually take the test, I\u0026rsquo;ve decided to blog my journey of going through the official AWS book exercises at the end of each chapter. The plan is to make a quick little blog post as I walk through each as a way to learn in public and get myself into practicing writing more.","keywords":[],"articleBody":" What I’m doing I’ve been studying for the AWS Advanced Networking Specialty exam off and on for a few months now. As I ramp up to actually take the test, I’ve decided to blog my journey of going through the official AWS book exercises at the end of each chapter. The plan is to make a quick little blog post as I walk through each as a way to learn in public and get myself into practicing writing more. To me, this is a very valuable skill to develop and one I wish I had started doing a long time ago.\nThat being said, let’s jump in with Chapter 2 (Chapter 1 is just about reviewing documentation). This post will use screenshots and text explanations wherever I feel necessary.\nWhat are the tasks? I’m putting most of this into my own words as I don’t want to get into any trouble pasting directly from the book. All of this will obviously have additional sub-tasks that I will put into each section to really flesh this out.\nCreate a custom dual-stack VPC Create public and private subnets in the newly created VPC running both IPv4 and IPv6 Add an Internet Gateway (IGW), NAT Gateway, and Egress-only Internet Gateway (EIGW) to your VPC Configure routing in the main route table to the IGW Set up a new route table for the private subnet and configure routing to the NAT GW and the EIGW Launch an EC2 instance in the public subnet and access it through SSH Launch an EC2 instance in the private subnet and verify that it is unreachable from the public internet Access the private EC2 instance from the public subnet instance and get an update from the internet Create a custom VPC Create a custom dual-stack VPC First things first. Let’s go into the Services menu and click on the “Networking and Content Delivery” section. Then click “VPC” (I like to also click the star when I’m doing labs like these as it will pin it to the top so you don’t have to keep going through the menu to find it- just a personal preference though)\nClick “Create VPC” and let’s check “VPC only” as I don’t want to use the wizard for this Fill in a name of your choosing and add an IPv4 CIDR that you want to use (I’ve chosen 192.168.0.0/16 for mine) Select the “Amazon-provided IPv6 CIDR block” button Click “Create VPC” at the bottom\nCreate subnets in the new VPC Create public and private subnet in the newly created VPC running both IPv4 and IPv6 Let’s go back to the VPC menu and this time click on “Subnets”. We’ll then click on “Create subnet” in the top right Select the new VPC and fill in all of the parameters necessary. You can add all subnets in the same screen so I’ll go ahead and do that I’m using 192.168.1.0/24 and 192.168.2.0/24 for IPv4 and using 01 and 02 as the subned ID’s for the IPv6 ranges When done, just hit “Create subnet”\nAdd an IGW, NAT Gateway, and EIGW Add an Internet Gateway (IGW), NAT Gateway, and Egress-only Internet Gateway (EIGW) to your VPC Back in the VPC menu again, let’s click in the “Internet gateways” menu and then click “Create internet gateway” in the top right Give it a name and click “Create internet gateway”\nAttach this new IGW to the proper VPC (there are popups at the top after you click create, or you can use the actions drop-down menu to do this)\nVPC menu again, this time let’s click “Egress-only internet gateways” and then “Create egress-only internet gateway” in the top right Give it a name and choose the VPC it will be attached to then click “Create egress-only internet gateway”\nVPC menu once again and click the “NAT Gateways” section and then “Create NAT gateway” in the top right Give it a name and select the public subnet for where to place it. Click “Allocate Elastic IP” and it will auto-fill the box with it. Click “Create NAT gateway”\nConfigure routing to the internet Configure routing in the main route table to the IGW Find your best friend, the VPC menu again. This time we’ll be clicking on the “Route tables” section. Click on the route table that was stood up when you created the VPC (I’ve renamed mine to Public to make it easy to identify). Click “Edit Routes” in the bottome section and then “Add route” Add a default route for IPv4 and IPv6 to the IGW (when you click destination you can choose internet gateway and then select the one you are setting up)\nConfigure routing for the private subnet Set up a new route table for the private subnet and configure routing to the NAT GW and the EIGW Now we will create a new route table to be used with the private subnet From the VPC menu, select “Route tables”, “Create route table”, and fill out the required information\nAdd default routes to this new route table for IPv4 to the NAT Gateway and for IPv6 to the EIGW\nClick on the “subnet associations” submenu and associate this Route table to the private subnet\nLaunch and access an EC2 instance in the public subnet Launch an EC2 instance in the public subnet and access it through SSH Finally a new menu! Click on “Services” in the upper left of the AWS console Find the “Compute” section and click the star for EC2 (to favorite this one for easy access like we did with VPC above)\nClick on “Instances” and then “Launch instances” in the top right Name the instance, choose Amazon Linux (it will likely be the default selection), and make sure t2.micro is selected for the “instance type” (this should also be the default)\nWe’ll need to create a new Key Pair so that we can access this instance after it’s up and running Hit the “Create new key pair” link to the right of the Key Pair section Fill out the relevant information and create the key pair. Make sure you download it locally as we’ll be using it real soon.\nContinue on to the “Network settings” portion of the EC2 setup Assign it to the custom VPC and to your public subnet. Enable both IPv4 and IPv6 auto-assign for IPs. Name your new Security Group (SG) and add a rule to allow SSH inbound (I’ve left mine set as sourced from anywhere but you would definitely lock this down if you wanted to do this outside of a lab environment)\nLaunch your instance!\nOnce this new instance is up and running, you will be able to SSH to it from a terminal. I’m on a Mac and I favor iTerm2 so that’s what I’ll be using Follow the instructions provided by AWS if you get stuck\nOnce you are successfully connected, run a “sudo yum update -y” command to update the OS to prove that you can reach the internet from this instance and that all is working as intended\nYou should also notice that you connected to a public IP but the IP showing in the instance is the private one. This is expected behavior becuase the IGW does a NAT behind the scenes for any traffic destined to the instance’s public IP\nLaunch and EC2 instance in the private subnet Launch an EC2 instance in the private subnet and verify that it is unreachable from the public internet You can follow all of the same steps as the previous section here for setup except that you assign it to the private subnet this time.\nAfter this instance comes up, attempt to access it the same was as you accessed the public instance. You will not be able to.\nAccess the private instance through the Bastion host Access the private EC2 instance from the public subnet instance and get an update from the internet The way to do this is to SSH back to the public instance and use that as a jump-off point (this is called a Bastion host) to SSH to your private instance\n","wordCount":"1356","inLanguage":"en","datePublished":"2022-10-29T14:35:26-04:00","dateModified":"2022-10-29T14:35:26-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://aperkins828.github.io/blog/posts/chapter2-walkthrough/"},"publisher":{"@type":"Organization","name":"To the cloud","logo":{"@type":"ImageObject","url":"https://aperkins828.github.io/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://aperkins828.github.io/blog/ accesskey=h title="To the cloud (Alt + H)">To the cloud</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://aperkins828.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://aperkins828.github.io/blog/posts/>Posts</a></div><h1 class=post-title>AWS Advanced Networking Specialty Study Guide Chapter 2 Exercises Walkthrough</h1><div class=post-meta><span title='2022-10-29 14:35:26 -0400 -0400'>October 29, 2022</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-im-doing aria-label="What I&amp;rsquo;m doing">What I&rsquo;m doing</a></li><li><a href=#what-are-the-tasks aria-label="What are the tasks?">What are the tasks?</a><ul><li><a href=#create-a-custom-vpc aria-label="Create a custom VPC">Create a custom VPC</a></li><li><a href=#create-subnets-in-the-new-vpc aria-label="Create subnets in the new VPC">Create subnets in the new VPC</a></li><li><a href=#add-an-igw-nat-gateway-and-eigw aria-label="Add an IGW, NAT Gateway, and EIGW">Add an IGW, NAT Gateway, and EIGW</a></li><li><a href=#configure-routing-to-the-internet aria-label="Configure routing to the internet">Configure routing to the internet</a></li><li><a href=#configure-routing-for-the-private-subnet aria-label="Configure routing for the private subnet">Configure routing for the private subnet</a></li><li><a href=#launch-and-access-an-ec2-instance-in-the-public-subnet aria-label="Launch and access an EC2 instance in the public subnet">Launch and access an EC2 instance in the public subnet</a></li><li><a href=#launch-and-ec2-instance-in-the-private-subnet aria-label="Launch and EC2 instance in the private subnet">Launch and EC2 instance in the private subnet</a></li><li><a href=#access-the-private-instance-through-the-bastion-host aria-label="Access the private instance through the Bastion host">Access the private instance through the Bastion host</a></li></ul></li></ul></div></details></div><div class=post-content><p><img loading=lazy src=../../resources/_gen/images/AWS-Certified-Advanced-Networking-Specialty_badge.png alt="AWS ANS Specialty badge"></p><h2 id=what-im-doing>What I&rsquo;m doing<a hidden class=anchor aria-hidden=true href=#what-im-doing>#</a></h2><p>I&rsquo;ve been studying for the AWS Advanced Networking Specialty exam off and on for a few months now. As I ramp up to actually take the test, I&rsquo;ve decided to blog my journey of going through the official AWS book exercises at the end of each chapter. The plan is to make a quick little blog post as I walk through each as a way to <em>learn in public</em> and get myself into practicing writing more. To me, this is a very valuable skill to develop and one I wish I had started doing a long time ago.</p><p>That being said, let&rsquo;s jump in with Chapter 2 (Chapter 1 is just about reviewing documentation). This post will use screenshots and text explanations wherever I feel necessary.</p><h2 id=what-are-the-tasks>What are the tasks?<a hidden class=anchor aria-hidden=true href=#what-are-the-tasks>#</a></h2><p>I&rsquo;m putting most of this into my own words as I don&rsquo;t want to get into any trouble pasting directly from the book. All of this will obviously have additional sub-tasks that I will put into each section to really flesh this out.</p><ul><li>Create a custom dual-stack VPC</li><li>Create public and private subnets in the newly created VPC running both IPv4 and IPv6</li><li>Add an Internet Gateway (IGW), NAT Gateway, and Egress-only Internet Gateway (EIGW) to your VPC</li><li>Configure routing in the main route table to the IGW</li><li>Set up a new route table for the private subnet and configure routing to the NAT GW and the EIGW</li><li>Launch an EC2 instance in the public subnet and access it through SSH</li><li>Launch an EC2 instance in the private subnet and verify that it is unreachable from the public internet</li><li>Access the private EC2 instance from the public subnet instance and get an update from the internet</li></ul><h3 id=create-a-custom-vpc>Create a custom VPC<a hidden class=anchor aria-hidden=true href=#create-a-custom-vpc>#</a></h3><ul><li><input checked disabled type=checkbox> Create a custom dual-stack VPC</li></ul><p>First things first. Let&rsquo;s go into the Services menu and click on the &ldquo;Networking and Content Delivery&rdquo; section. Then click &ldquo;VPC&rdquo; (I like to also click the star when I&rsquo;m doing labs like these as it will pin it to the top so you don&rsquo;t have to keep going through the menu to find it- just a personal preference though)</p><p><img loading=lazy src=../../resources/_gen/images/VPC%20menu.png alt="VPC section in the menu"></p><p>Click &ldquo;Create VPC&rdquo; and let&rsquo;s check &ldquo;VPC only&rdquo; as I don&rsquo;t want to use the wizard for this
Fill in a name of your choosing and add an IPv4 CIDR that you want to use (I&rsquo;ve chosen 192.168.0.0/16 for mine)
Select the &ldquo;Amazon-provided IPv6 CIDR block&rdquo; button
Click &ldquo;Create VPC&rdquo; at the bottom</p><p><img loading=lazy src=../../resources/_gen/images/VPC%20setup%20page.png alt="VPC setup page"></p><h3 id=create-subnets-in-the-new-vpc>Create subnets in the new VPC<a hidden class=anchor aria-hidden=true href=#create-subnets-in-the-new-vpc>#</a></h3><ul><li><input checked disabled type=checkbox> Create public and private subnet in the newly created VPC running both IPv4 and IPv6</li></ul><p>Let&rsquo;s go back to the VPC menu and this time click on &ldquo;Subnets&rdquo;. We&rsquo;ll then click on &ldquo;Create subnet&rdquo; in the top right
Select the new VPC and fill in all of the parameters necessary. You can add all subnets in the same screen so I&rsquo;ll go ahead and do that
I&rsquo;m using 192.168.1.0/24 and 192.168.2.0/24 for IPv4 and using 01 and 02 as the subned ID&rsquo;s for the IPv6 ranges
When done, just hit &ldquo;Create subnet&rdquo;</p><p><img loading=lazy src=../../resources/_gen/images/Subnet%20setup%20page.png alt="Subnet setup page"></p><h3 id=add-an-igw-nat-gateway-and-eigw>Add an IGW, NAT Gateway, and EIGW<a hidden class=anchor aria-hidden=true href=#add-an-igw-nat-gateway-and-eigw>#</a></h3><ul><li><input checked disabled type=checkbox> Add an Internet Gateway (IGW), NAT Gateway, and Egress-only Internet Gateway (EIGW) to your VPC</li></ul><p>Back in the VPC menu again, let&rsquo;s click in the &ldquo;Internet gateways&rdquo; menu and then click &ldquo;Create internet gateway&rdquo; in the top right
Give it a name and click &ldquo;Create internet gateway&rdquo;</p><p><img loading=lazy src=../../resources/_gen/images/IGW%20setup%20page.png alt="IGW setup page"></p><p>Attach this new IGW to the proper VPC (there are popups at the top after you click create, or you can use the actions drop-down menu to do this)</p><p><img loading=lazy src=../../resources/_gen/images/IGW%20attach%20page.png alt="Attach IGW setup"></p><p>VPC menu again, this time let&rsquo;s click &ldquo;Egress-only internet gateways&rdquo; and then &ldquo;Create egress-only internet gateway&rdquo; in the top right
Give it a name and choose the VPC it will be attached to then click &ldquo;Create egress-only internet gateway&rdquo;</p><p><img loading=lazy src=../../resources/_gen/images/EIGW%20setup%20page.png alt="EIGW setup page"></p><p>VPC menu once again and click the &ldquo;NAT Gateways&rdquo; section and then &ldquo;Create NAT gateway&rdquo; in the top right
Give it a name and select the public subnet for where to place it. Click &ldquo;Allocate Elastic IP&rdquo; and it will auto-fill the box with it. Click &ldquo;Create NAT gateway&rdquo;</p><p><img loading=lazy src=../../resources/_gen/images/NAT%20gateway%20setup%20page.png alt="NAT Gateway setup page"></p><h3 id=configure-routing-to-the-internet>Configure routing to the internet<a hidden class=anchor aria-hidden=true href=#configure-routing-to-the-internet>#</a></h3><ul><li><input checked disabled type=checkbox> Configure routing in the main route table to the IGW</li></ul><p>Find your best friend, the VPC menu again. This time we&rsquo;ll be clicking on the &ldquo;Route tables&rdquo; section.
Click on the route table that was stood up when you created the VPC (I&rsquo;ve renamed mine to Public to make it easy to identify).
Click &ldquo;Edit Routes&rdquo; in the bottome section and then &ldquo;Add route&rdquo;
Add a default route for IPv4 and IPv6 to the IGW (when you click destination you can choose internet gateway and then select the one you are setting up)</p><p><img loading=lazy src=../../resources/_gen/images/route%20table%20configuration.png alt="Route table configuration"></p><h3 id=configure-routing-for-the-private-subnet>Configure routing for the private subnet<a hidden class=anchor aria-hidden=true href=#configure-routing-for-the-private-subnet>#</a></h3><ul><li><input checked disabled type=checkbox> Set up a new route table for the private subnet and configure routing to the NAT GW and the EIGW</li></ul><p>Now we will create a new route table to be used with the private subnet
From the VPC menu, select &ldquo;Route tables&rdquo;, &ldquo;Create route table&rdquo;, and fill out the required information</p><p><img loading=lazy src=../../resources/_gen/images/route%20table%20setup%20page.png alt="New route table setup page"></p><p>Add default routes to this new route table for IPv4 to the NAT Gateway and for IPv6 to the EIGW</p><p><img loading=lazy src=../../resources/_gen/images/private%20route%20table%20setup.png alt="Private route table setup"></p><p>Click on the &ldquo;subnet associations&rdquo; submenu and associate this Route table to the private subnet</p><p><img loading=lazy src=../../resources/_gen/images/subnet%20association.png alt="Subnet association page"></p><h3 id=launch-and-access-an-ec2-instance-in-the-public-subnet>Launch and access an EC2 instance in the public subnet<a hidden class=anchor aria-hidden=true href=#launch-and-access-an-ec2-instance-in-the-public-subnet>#</a></h3><ul><li><input checked disabled type=checkbox> Launch an EC2 instance in the public subnet and access it through SSH</li></ul><p>Finally a new menu!
Click on &ldquo;Services&rdquo; in the upper left of the AWS console
Find the &ldquo;Compute&rdquo; section and click the star for EC2 (to favorite this one for easy access like we did with VPC above)</p><p><img loading=lazy src=../../resources/_gen/images/EC2%20menu.png alt="EC2 menu"></p><p>Click on &ldquo;Instances&rdquo; and then &ldquo;Launch instances&rdquo; in the top right
Name the instance, choose Amazon Linux (it will likely be the default selection), and make sure t2.micro is selected for the &ldquo;instance type&rdquo; (this should also be the default)</p><p><img loading=lazy src=../../resources/_gen/images/EC2%20setup-first.png alt="EC2 setup"></p><p>We&rsquo;ll need to create a new Key Pair so that we can access this instance after it&rsquo;s up and running
Hit the &ldquo;Create new key pair&rdquo; link to the right of the Key Pair section
Fill out the relevant information and create the key pair. Make sure you download it locally as we&rsquo;ll be using it real soon.</p><p><img loading=lazy src=../../resources/_gen/images/create%20key%20pair.png alt="EC2 Key Pair creation"></p><p>Continue on to the &ldquo;Network settings&rdquo; portion of the EC2 setup
Assign it to the custom VPC and to your public subnet.
Enable both IPv4 and IPv6 auto-assign for IPs.
Name your new Security Group (SG) and add a rule to allow SSH inbound (I&rsquo;ve left mine set as sourced from anywhere but you would definitely lock this down if you wanted to do this outside of a lab environment)</p><p><img loading=lazy src=../../resources/_gen/images/EC2%20network%20config.png alt="EC2 Network config section"></p><p>Launch your instance!</p><p>Once this new instance is up and running, you will be able to SSH to it from a terminal. I&rsquo;m on a Mac and I favor iTerm2 so that&rsquo;s what I&rsquo;ll be using
Follow the instructions provided by AWS if you get stuck</p><p><img loading=lazy src=../../resources/_gen/images/AWS%20SSH%20instructions.png alt="AWS SSH instructions"></p><p>Once you are successfully connected, run a &ldquo;sudo yum update -y&rdquo; command to update the OS to prove that you can reach the internet from this instance and that all is working as intended</p><p><img loading=lazy src=../../resources/_gen/images/sudo%20update.png alt="running an update"></p><p>You should also notice that you connected to a public IP but the IP showing in the instance is the private one. This is expected behavior becuase the IGW does a NAT behind the scenes for any traffic destined to the instance&rsquo;s public IP</p><h3 id=launch-and-ec2-instance-in-the-private-subnet>Launch and EC2 instance in the private subnet<a hidden class=anchor aria-hidden=true href=#launch-and-ec2-instance-in-the-private-subnet>#</a></h3><ul><li><input checked disabled type=checkbox> Launch an EC2 instance in the private subnet and verify that it is unreachable from the public internet</li></ul><p>You can follow all of the same steps as the previous section here for setup except that you assign it to the private subnet this time.</p><p>After this instance comes up, attempt to access it the same was as you accessed the public instance. You will not be able to.</p><h3 id=access-the-private-instance-through-the-bastion-host>Access the private instance through the Bastion host<a hidden class=anchor aria-hidden=true href=#access-the-private-instance-through-the-bastion-host>#</a></h3><ul><li><input checked disabled type=checkbox> Access the private EC2 instance from the public subnet instance and get an update from the internet</li></ul><p>The way to do this is to SSH back to the public instance and use that as a jump-off point (this is called a Bastion host) to SSH to your private instance</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://aperkins828.github.io/blog/>To the cloud</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>